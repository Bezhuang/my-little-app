# ==================== 基础配置 ====================
spring.application.name=my-little-app-backend
server.port=8080

# ==================== 文件上传配置 (max 50MB) ====================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB

# ==================== JWT 配置 ====================
jwt.secret=${JWT_SECRET}
jwt.expiration=86400000

# ==================== 数据库配置 ====================
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}

# ==================== Druid 连接池  ====================
spring.datasource.druid.initial-size=3
spring.datasource.druid.min-idle=2
spring.datasource.druid.max-active=10
spring.datasource.druid.max-wait=30000
spring.datasource.druid.time-between-eviction-runs-millis=60000
spring.datasource.druid.min-evictable-idle-time-millis=300000
spring.datasource.druid.validation-query=SELECT 1
spring.datasource.druid.test-while-idle=true
spring.datasource.druid.test-on-borrow=false
spring.datasource.druid.test-on-return=false
spring.datasource.druid.pool-prepared-statements=false
spring.datasource.druid.max-pool-prepared-statement-per-connection-size=10
spring.datasource.druid.connection-error-retry-attempts=3
spring.datasource.druid.time-between-connect-error-retry-millis=60000

# ==================== MyBatis 配置 ====================
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=com.bezhuang.my_little_app_backend.entity
mybatis.configuration.map-underscore-to-camel-case=true
# 生产环境关闭 SQL 日志输出
mybatis.configuration.log-impl=org.apache.ibatis.logging.nologging.NoLoggingImpl

# ==================== 日志配置 ====================
logging.level.root=WARN
logging.level.com.bezhuang.my_little_app_backend=INFO
logging.level.org.springframework.security=WARN
logging.level.com.bezhuang.my_little_app_backend.mapper=INFO
logging.file.name=logs/app.log
logging.file.max-size=100MB
logging.file.max-history=7
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n

# ==================== 邮件配置 ====================
spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# ==================== Redis 配置 ====================
# 启用 Redis 缓存（设置为 false 则不使用缓存，降级为无缓存模式）
redis.enabled=${REDIS_ENABLED}
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}

# ==================== 缓存配置 ====================
# AI 配置缓存过期时间（秒），默认 1 小时
cache.ai-config-ttl=${CACHE_AI_CONFIG_TTL:3600}

# ==================== CORS 配置 ====================
cors.allowed-origins=${CORS_ALLOWED_ORIGINS}
